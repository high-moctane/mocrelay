pre-commit:
  commands:
    modernize:
      glob: "*.go"
      env:
        GOEXPERIMENT: jsonv2
      run: go run golang.org/x/tools/go/analysis/passes/modernize/cmd/modernize@latest -fix ./...
      stage_fixed: true
    fmt:
      glob: "*.go"
      run: gofmt -w {staged_files}
      stage_fixed: true
